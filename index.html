document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('userForm');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const ageInput = document.getElementById('age');
    const nameError = document.getElementById('nameError');
    const emailError = document.getElementById('emailError');
    const ageError = document.getElementById('ageError');
    const successMessage = document.getElementById('successMessage');
    const successData = document.getElementById('successData');

    // Hide all error messages initially
    nameError.style.display = 'none';
    emailError.style.display = 'none';
    ageError.style.display = 'none';

    // Validate name field
    function validateName() {
        if (nameInput.value.trim() === '') {
            nameInput.classList.add('is-invalid');
            nameError.style.display = 'block';
            return false;
        } else {
            nameInput.classList.remove('is-invalid');
            nameError.style.display = 'none';
            return true;
        }
    }

    // Validate email field
    function validateEmail() {
        const email = emailInput.value.trim();
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (email === '' || !emailRegex.test(email) || !email.endsWith('.com')) {
            emailInput.classList.add('is-invalid');
            emailError.style.display = 'block';
            return false;
        } else {
            emailInput.classList.remove('is-invalid');
            emailError.style.display = 'none';
            return true;
        }
    }

    // Validate age field
    function validateAge() {
        const age = parseInt(ageInput.value);
        
        if (isNaN(age) || age < 18 || age > 120) {
            ageInput.classList.add('is-invalid');
            ageError.style.display = 'block';
            return false;
        } else {
            ageInput.classList.remove('is-invalid');
            ageError.style.display = 'none';
            return true;
        }
    }

    // Form submission handler
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const isNameValid = validateName();
        const isEmailValid = validateEmail();
        const isAgeValid = validateAge();
        
        if (isNameValid && isEmailValid && isAgeValid) {
            // All fields are valid, show success message
            successData.textContent = Name: ${nameInput.value}, Email: ${emailInput.value}, Age: ${ageInput.value};
            successMessage.classList.remove('d-none');
            
            // Reset form after successful submission
            setTimeout(() => {
                form.reset();
                successMessage.classList.add('d-none');
            }, 3000);
        }
    });

    // Real-time validation on input change
    nameInput.addEventListener('input', validateName);
    emailInput.addEventListener('input', validateEmail);
    ageInput.addEventListener('input', validateAge);
});
